# mini-text Phase 6 実装計画

**作成日**: 2025-11-03
**ステータス**: 計画段階

## 概要

Phase 6 では、以下の機能追加とUI/UX改善を実施します。Phase 5でコードクリーンアップが完了し、Phase 4までで基本機能が実装済みのため、ユーザー体験の向上に焦点を当てます。

## 実装予定項目

### A. UI/UX改善

#### A-1. ウィンドウの「常に最前面」機能の改善
**現状**: GTK4の制限により完全には動作していない
**提案**: X11のウィンドウマネージャーヒントを直接使用
**工数**: 中
**効果**: 中
**優先度**: 低

**実装方法**:
- `Gdk.Surface.set_type_hint()` で `GDK_SURFACE_TYPE_HINT_DIALOG` を設定
- または直接 X11 の `_NET_WM_STATE_ABOVE` プロパティを設定
- Waylandでは動作しない可能性がある（X11専用機能）

#### A-2. ウィンドウリストの検索/フィルタ機能
**内容**: ウィンドウリスト上部に検索ボックスを追加し、ウィンドウ名でフィルタリング
**工数**: 小
**効果**: 中（ウィンドウが多い場合に便利）
**優先度**: 中

**実装方法**:
- `Gtk.SearchEntry` をウィンドウリスト上部に配置
- `on_search_changed` シグナルでリストをフィルタリング
- 大文字小文字を区別しない部分一致検索

#### A-4. ステータス表示の改善
**内容**:
- 進行状況の視覚的フィードバック（スピナー）
- エラー時の詳細情報表示
- 成功/失敗のアイコン表示

**工数**: 小
**効果**: 小（見た目の改善）
**優先度**: 低

**実装方法**:
- `Gtk.Spinner` で進行状況を表示
- `Gtk.Image` でアイコンを表示（success/error）
- ステータスラベルの横に配置

### B. ドキュメント整備

#### D-1. ユーザーマニュアル作成
**内容**:
- 使い方ガイド（スクリーンショット付き）
- FAQ
- トラブルシューティング

**工数**: 中
**効果**: 大（ユーザビリティ向上）
**優先度**: 中

**構成案**:
```
docs/user-guide/
├── 01-getting-started.md      # インストールと起動
├── 02-basic-usage.md          # 基本的な使い方
├── 03-settings.md             # 設定ダイアログの説明
├── 04-troubleshooting.md      # トラブルシューティング
├── 05-faq.md                  # よくある質問
└── images/                    # スクリーンショット
```

#### D-2. 開発者向けドキュメント
**内容**:
- アーキテクチャ詳細図
- API仕様書
- 拡張ガイド

**工数**: 中
**効果**: 小（現在は個人開発）
**優先度**: 低

**構成案**:
```
docs/developer/
├── architecture.md            # アーキテクチャ図
├── api-reference.md           # API仕様
├── extending.md               # 拡張ガイド
└── testing.md                 # テスト方針
```

### C. 機能追加（将来検討）

以下の機能はPhase 6では実装せず、将来的な検討項目として記録：

#### B-5. ファイルからのテキスト読み込み
**内容**: テキストファイルを開いて内容を読み込む機能
**工数**: 小
**効果**: 小
**優先度**: 低

**実装方法**:
- `Gtk.FileChooserDialog` でファイル選択
- UTF-8でファイルを読み込み
- エラーハンドリング（大きすぎるファイル、文字コードエラーなど）

## 実装しない項目

以下の項目は Phase 6 では実装しません：

- **A-3. ショートカットキーの追加** - 現在のUI操作で十分
- **A-5. ダークモード対応** - GTK4が自動対応
- **B-1. 送信履歴機能** - スコープが大きい、Phase 7以降
- **B-2. テキストテンプレート機能** - スコープが大きい、Phase 7以降
- **B-3. 複数ウィンドウへの一括送信** - ユースケースが限定的
- **B-4. クリップボード履歴監視** - スコープが大きい
- **C-1. 統合テスト** - 手動テストで十分カバーできている
- **C-2. エラーハンドリングの強化** - 現状で十分
- **C-3. 設定値のバリデーション強化** - 現状で十分
- **D-3. 設定例の追加** - 優先度低
- **E-2. 型ヒントの完全化** - Phase 5で実施
- **E-3. コメント・docstringの充実** - 現状で十分
- **E-4. リファクタリング** - Phase 5で実施
- **F-1. .debパッケージ作成** - 配布方法は未定
- **F-2. AppImage作成** - 配布方法は未定
- **F-3. Flatpak/Snap対応** - 配布方法は未定

## Phase 6 実装順序

1. **A-2. ウィンドウリストの検索/フィルタ機能** (優先度: 高)
2. **D-1. ユーザーマニュアル作成** (優先度: 高)
3. **A-4. ステータス表示の改善** (優先度: 中)
4. **A-1. 常に最前面機能の改善** (優先度: 低)
5. **D-2. 開発者向けドキュメント** (優先度: 低)

## 期待される成果

- ウィンドウが多い環境でも使いやすくなる（検索機能）
- 新規ユーザーが迷わず使える（ユーザーマニュアル）
- 視覚的なフィードバックの向上（ステータス改善）

## Phase 5 で完了した項目

- ✅ E-1. レガシーコードの削除（xclip関連）
- ✅ E-2. 型ヒントの完全化（Protocolの導入）
- ✅ E-4. リファクタリング（コードクリーンアップ）

## 参考情報

- Phase 1-4 の実装: `docs/design/gtk4-detailed-design.md`
- 現在の機能一覧: `gtk4/README.md`
