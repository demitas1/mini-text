# Phase 3 動作確認手順

**最終更新**: 2025-11-02
**ステータス**: 基本機能動作確認済み、IME問題あり

## 前提条件

- xdotool, xclipがインストール済み
- X11デスクトップ環境で実行
- PyQt6がvenv環境にインストール済み

## 実行方法

```bash
# 仮想環境をアクティベート
source venv/bin/activate

# アプリケーションを起動
python main.py
```

## 既知の問題

### IME（日本語入力）が動作しない

venv環境のPyQt6とシステムのfcitx5プラグインのバージョン不一致により、日本語入力ができません。

- **詳細**: `docs/design/ime-integration-issue.md`参照
- **回避策**: 英数字のみで動作確認を実施してください

## 確認項目

### ✓ 自動確認済み
- [x] 構文エラーなし
- [x] 全モジュールのインポート成功
- [x] PyQt6がインストール済み

### ✓ 人間による確認完了

#### 基本動作
- [x] アプリケーションが起動する
- [x] ウィンドウが常に最前面に表示される
- [x] ウィンドウサイズがデフォルト800x600である

#### ウィンドウリスト
- [x] 起動時に自動的にウィンドウリストが表示される
- [x] リフレッシュボタンでウィンドウリストが更新される
- [x] ウィンドウリストに "ID: ウィンドウ名" の形式で表示される

#### テキスト送信機能（英数字のみ）
1. [x] ウィンドウリストから送信先を選択
2. [x] テキストボックスに英数字テキストを入力
3. [x] 送信ボタンをクリック
4. [x] 選択したウィンドウにテキストが送信される
5. [x] ステータスバーに「テキストを送信しました」と表示される

**注**: 日本語入力は既知の問題により動作しない

#### テキストコピー機能
1. [x] コピーボタンをクリック
2. [x] ステータスバーに「X秒後にコピーを開始します...」と表示される
3. [x] 指定時間内にコピー元のテキストボックスをクリック
4. [x] テキストが自動的にコピーされる
5. [x] mini-textのテキストボックスにコピーしたテキストが表示される
6. [x] ステータスバーに「テキストをコピーしました」と表示される

#### エラーハンドリング
- [x] ウィンドウ未選択で送信: 「ウィンドウを選択してください」エラー表示
- [x] テキスト未入力で送信: 「送信するテキストを入力してください」エラー表示
- [x] エラーメッセージがステータスバーに表示される（赤文字表示は実装済み）

#### メニュー
- [x] ファイルメニューが表示される
- [x] 設定メニューをクリック: 「Phase 4で実装されます」ダイアログ表示
- [x] 終了メニューでアプリケーションが終了する

#### ウィンドウサイズ保存
1. [x] ウィンドウサイズを変更
2. [x] アプリケーションを終了
3. [x] 再度起動
4. [x] 前回のウィンドウサイズが復元される

### ⏳ 未確認項目

#### Qt Designer (オプション)
- [ ] Qt6 Designerで`mini_text/ui/resources/main_window.ui`を開ける
- [ ] UIを編集して保存できる
- [ ] 編集後のUIで正常に起動する

## 既知の制限事項

- 設定機能はPhase 4で実装予定
- 設定ダイアログは未実装

## トラブルシューティング

### アプリケーションが起動しない

```bash
# 依存関係を確認
source venv/bin/activate
python -c "from mini_text.utils.dependency_checker import DependencyChecker; print(DependencyChecker.check_dependencies())"
```

### UIファイルが見つからない

```bash
# UIファイルの存在を確認
ls -la mini_text/ui/resources/main_window.ui
```

### モジュールインポートエラー

```bash
# Pythonパスを確認
source venv/bin/activate
python -c "import sys; print('\n'.join(sys.path))"
```
